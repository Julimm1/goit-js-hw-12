{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n    const URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"45237784-d0fd30a4ec7a7095f46d82183\";\nconst PER_PAGE = 15;\n    let currentPage = 1;\nlet currentQuery = '';\n\n\nexport default async function searchImagesByQuery(query) {\n   if (query !== currentQuery) {\n        currentQuery = query;\n        currentPage = 1;\n    }\n\n    try {\n        const response = await axios.get(URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                per_page: PER_PAGE,\n                page: currentPage\n            }\n        });\n            currentPage += 1;\n                return response.data;\n    }    catch (error) {\n        throw new Error(error.response ? error.response.status : error.message);\n    }\n}\n\n// return fetch(`${URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`)\n//         .then((response) => {\n//             if (!response.ok) {\n//                 throw new Error(response.status);\n//             }\n//             return response.json();\n//         });","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n // Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'attr',\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n});\n\nexport function showError(error) {\n    iziToast.error({\n        position: \"topRight\",\n        message: error,\n    });\n}\n\n\n// \n    export function renderGallery(hits)   { \n  \n    const images = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>`\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\" \n            />\n        </a>\n        <div class=\"gallery-content\">\n            <p class=\"text-title\">Likes<span  class=\"text\">${likes}</span></p>\n            <p class=\"text-title\">Views<span  class=\"text\">${views}</span></p>\n            <p class=\"text-title\">Comments<span  class=\"text\">${comments}</span></p>\n            <p class=\"text-title\">Downloads<span class=\"text\">${downloads}</span></p>\n        </div>\n    </li>`).join('');\n\n      document.querySelector('.gallery-list').insertAdjacentHTML(\"beforeend\", images);\n    lightbox.refresh(); // Оновлення Lightbox\n\n}\n\nexport function cleanGallery() {\n    const list = document.querySelector(\".gallery-list\");\n    list.innerHTML = \"\";\n}\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport searchImagesByQuery from './js/pixabay-api.js';\nimport { showError, renderGallery,  cleanGallery } from './js/render-functions.js';\n\n\n\nconst searchForm = document.querySelector(\"#searchForm\");\nconst gallery = document.querySelector(\".gallery-list\")\nconst searchInput = document.querySelector(\"#searchInput\");\nconst searchLoader = document.querySelector(\".loading\");\nconst loadMoreBtn = document.querySelector(\".btn\");\n\nconst resultsPerPage = 15;\nlet currentQuery = '';\nlet currentPage = 1;\n\n  searchForm.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    currentQuery = searchInput.value.trim();\n    currentPage = 1;\n    cleanGallery(); \n      loadMoreBtn.classList.add('hidden');\n\n    await fetchImages();\n}); \n\nloadMoreBtn.addEventListener('click', async () => {\n    await fetchImages();\n});\n\n\n\n\n    \nasync function fetchImages() {\n   \n    const queryValue = searchInput.value.trim().toLowerCase();; \n    if (!queryValue) return; \n    searchLoader.classList.remove(\"hidden\"); \n\n    try {\n        const data = await searchImagesByQuery(currentQuery, currentPage, resultsPerPage)\n        if (data.hits.length === 0) { \n            showError('Sorry, there are no images matching your search query. Please try again!')\n        } else {\n            renderGallery(data.hits);\n            if (currentPage > 1) {\n                scrollPage()\n            }\n            if (data.hits.length < resultsPerPage || data.totalHits <= currentPage * resultsPerPage) { \n                loadMoreBtn.classList.add('hidden'); \n                iziToast.info({\n                    position: \"topRight\",\n                    message: \"We're sorry, but you've reached the end of search results.\"\n                });\n            } else {\n                loadMoreBtn.classList.remove('hidden');\n            }\n        }\n    } catch (error) {\n        showError(error.message);\n    } finally {\n        searchLoader.classList.add(\"hidden\"); \n    }\n}\n\nfunction scrollPage() {\n\n    const { height: cardHeight } = gallery.getBoundingClientRect();\n                window.scrollBy({\n                    top: cardHeight * 2, \n                    behavior: 'smooth'\n                });\n    \n}\n"],"names":["URL","API_KEY","PER_PAGE","currentPage","currentQuery","searchImagesByQuery","query","response","axios","error","lightbox","SimpleLightbox","showError","iziToast","renderGallery","hits","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","cleanGallery","list","searchForm","gallery","searchInput","searchLoader","loadMoreBtn","resultsPerPage","event","fetchImages","data","scrollPage","cardHeight"],"mappings":"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"}